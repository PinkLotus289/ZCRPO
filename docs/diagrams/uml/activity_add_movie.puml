@startuml
title Activity Diagram — Добавление фильма в коллекцию

start

:Открыть экран поиска фильмов;
:Ввести название или часть названия;
:Отправить запрос к внешнему API фильмов;

if (Результаты найдены?) then (да)
  :Отобразить список найденных фильмов;
  :Пользователь выбирает фильм;
  :Открыть карточку фильма;

  if (Фильм уже есть в коллекции?) then (да)
    :Показать уведомление 
    "Этот фильм уже есть в вашей коллекции";
    stop
  else (нет)
    :Добавить фильм в коллекцию пользователя;
    :Сохранить запись в базе данных;
    :Показать сообщение "Фильм успешно добавлен";
    :Обновить экран коллекции;
    stop
  endif

else (нет)
  :Показать сообщение "Фильмы не найдены";
  :Предложить изменить запрос;
  stop
endif

@enduml
