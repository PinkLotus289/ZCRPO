# План тестирования — MovieMate

## 1. Общая информация

Этот документ определяет стратегию тестирования, окружение и цели для веб-приложения **MovieMate** — платформы для управления коллекцией фильмов с поиском, рекомендациями и интеграцией с TMDb API, построенной на **Flask (Python)**, **JavaScript** и локальным JSON хранилищем.

Цель тестирования — проверить все backend эндпоинты, логику работы с коллекциями пользователей, интеграцию с TMDb API и корректность работы frontend-части.

## 2. Цели тестирования

1. Проверить функциональную корректность всех API эндпоинтов (`/api/users`, `/api/movies`, `/api/collections`).
2. Валидировать логику создания пользователей, добавления фильмов и управления коллекциями.
3. Убедиться в корректной интеграции с TMDb API и генерации IMDb рейтингов.
4. Проверить работу поиска фильмов и системы рекомендаций.
5. Оценить стабильность системы и обработку ошибочных запросов.

## 3. Область тестирования

### В области тестирования
- Юнит и интеграционные тесты для всех Flask эндпоинтов.
- Логика работы с пользователями (создание, получение, удаление).
- Управление фильмами (поиск, добавление в коллекцию, рекомендации).
- Интеграция с TMDb API (получение данных о фильмах, постеров, рейтингов).
- JSON хранилище данных (JsonStorage).
- Модели данных (User, Movie, UserMovie).

### Вне области тестирования
- UI тестирование (обрабатывается вручную).
- Нагрузочное тестирование (планируется на следующем этапе).
- Тестирование производительности при больших коллекциях (>10000 фильмов).

## 4. Стратегия тестирования

Тестирование будет выполняться с использованием **автоматизированного тестирования на базе pytest** для backend-части.

### Фреймворки и инструменты
| Тип | Инструмент |
|-----|-----------|
| Тест-раннер | pytest |
| Мокирование | unittest.mock |
| HTTP тестирование | Flask test_client |
| Хранилище | JsonStorage (файловая система) |
| Фреймворк | Flask + Flask-CORS |
| Покрытие кода | pytest-cov (планируется) |
| CI/CD | GitHub Actions (планируется) |

## 5. Тестовое окружение

| Компонент | Технология |
|-----------|-------------|
| ОС | Windows 11 / Linux |
| Backend | Flask 3.0 (Python 3.11+) |
| Frontend | HTML5, CSS3, JavaScript (Vanilla JS) |
| API интеграция | TMDb API, OMDb API |
| Хранилище | JSON файлы (users.json, movies.json) |
| Порт сервера | 5000 (Flask development) |

## 6. Типы тестов и покрытие

| Тип | Назначение |
|-----|-----------|
| **Юнит-тесты** | Проверка изолированной логики моделей и утилит |
| **Интеграционные тесты API** | Валидация HTTP эндпоинтов и бизнес-потоков |
| **Тесты хранилища** | Проверка корректности работы с JSON файлами |
| **Тесты моделей** | Проверка создания и валидации моделей данных |
| **Тесты интеграции с TMDb** | Проверка получения данных о фильмах через API |

## 7. Риски и меры по их снижению

| Риск | Меры по снижению |
|------|------------------|
| TMDb API недоступен | Использовать моки для тестирования |
| Изменение формата данных TMDb | Добавить валидацию схемы ответов |
| Конфликты при параллельной записи в JSON | Добавить блокировки при записи |
| Потеря данных при сбое | Реализовать резервное копирование JSON файлов |

✅ **Уровень риска:** Низкий–Средний

## 8. Критерии входа и выхода

**Критерии входа**
- Все зависимости Python установлены (`requirements.txt`).
- Flask приложение запускается без ошибок.
- Доступен TMDb API ключ для интеграционных тестов.

**Критерии выхода**
- Все тесты выполнены успешно.
- Критические и важные дефекты исправлены.
- Все API эндпоинты возвращают корректные данные.
- Поиск фильмов и рекомендации работают корректно.

## 9. Отчетность и результаты

| Документ | Описание |
|----------|----------|
| Test-plan.md | Этот документ |
| Test-result.md | Результаты выполнения тестов |
| Testing-summary.md | Итоги и выводы тестирования |

## 10. Тестовые данные

### Тестовые пользователи
| Имя пользователя | ID |
|-----------------|-----|
| testuser | test-user-001 |
| admin | test-user-002 |

### Тестовые фильмы
| Название | IMDb рейтинг | Жанр |
|----------|-------------|------|
| The Shawshank Redemption | 9.3 | Drama |
| The Dark Knight | 9.0 | Action |
| Inception | 8.8 | Sci-Fi |
| Interstellar | 8.6 | Sci-Fi |
| The Matrix | 8.7 | Sci-Fi |

### Тестовые сценарии
1. Создание нового пользователя и добавление фильма в коллекцию
2. Поиск фильмов по названию через TMDb API
3. Получение рекомендаций на основе жанров коллекции
4. Удаление фильма из коллекции пользователя
5. Получение статистики по коллекции пользователя

---

**Дата создания:** 13 ноября 2025  
**Версия:** 1.0.0  
**Статус:** ✅ Утвержден для выполнения
